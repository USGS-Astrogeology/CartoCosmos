<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8"></meta>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v5.3.0/css/ol.css" type="text/css">
    <link rel="stylesheet" href="js/ol-layerswitcher/dist/ol-layerswitcher.css" type="text/css">
    <!-- <link rel="stylesheet" type="text/css" href="/css/main.css"> -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="js/proj4js/dist/proj4.js"></script>
    <script src="js/openlayers/v5.3.0-dist/ol.js"></script>
    <script src="js/ol-layerswitcher/dist/ol-layerswitcher.js"></script>
    <script src="js/planetary/planetaryFunctions.js"></script>
    <script src="js/planetary/planetaryMap.js"></script>
    <script src="js/planetary/ShapeDrawer.js"></script>

    <!-- Constains JSON with target and projection information -->
    <script src="https://astrowebmaps.wr.usgs.gov/webmapatlas/Layers/maps.js"></script>

    <style>
      .map {
        height: 800px;
        width: 100%;
        border: solid;
      }

      ul {
        list-style-type: none;
        padding-left: 0px;
      }

      .MapOptions {
        width: 8%;
        background-color: #d9d9d9;
        float: left;
        border: solid;
      }

      .DrawOptions {
        margin-left: 0px;
        margin-right: 80%;
        width: 10%;
        background-color: #d9d9d9;
        float: right;
        border: solid;
      }

      .projectionDiv {
        float: left;
      }
    </style>
    <title>Mars Map</title>
  </head>
  <body>
    <h2>Openlayers Map Example</h2>
    <h3>Select Target</h3>
    <select id="target-select"></select>
    <br>
<!--
    <select id="target" onchange="switchTarget();"><option value="Europa">Europa</option><option value="Io">Io</option><option selected="selected" value="Mars">Mars</option><option value="Mercury">Mercury</option><option value="Moon">Moon</option>
    <select> -->
    <script>
      var layerSelect = document.getElementById("layer-select");
      var targetSelect = document.getElementById("target-select");
      var targets = [];
      for(i=0; i<myJSONmaps['targets'].length; i++){
        currentTarget = myJSONmaps['targets'][i]['name'];
        //console.log(myJSONmaps['targets'][i]);
        if(!targets.includes(currentTarget)){
          targets.push(currentTarget);
          targets = targets.sort();
        }
      }
      for(j=0; j<targets.length; j++){
        var currentOption = document.createElement("option");
        currentOption.value = String(targets[j]);
        currentOption.text = String(targets[j]);
        // Set Mars to default
        if(currentOption.value == "MARS"){
          currentOption.selected = true;
        }
        targetSelect.add(currentOption);
      }
    </script>
    <script>
      function north() {
        document.getElementById("projSelect").selectedIndex = 1;
        document.getElementById("projSelect").onchange();
      }

      function cylindrical() {
        document.getElementById("projSelect").selectedIndex = 0;
        document.getElementById("projSelect").onchange();
      }

      function south() {
        document.getElementById("projSelect").selectedIndex = 2;
        document.getElementById("projSelect").onchange();
      }
    </script>
    <div id="map" class="map"></div>
    <div id="controls"></div>
    <div id="map-options" class="MapOptions">
      <h4 style="margin-top:0;">Map Options</h4>
      <table>
        <tr>
          <th>
            <ul id="proj-list" style="margin-top:0;">
              <li><input id="north" type="image" src="images/north-pole.png" onclick="north()"></li>
              <li><input id="cylindrical" type="image" src="images/cylindrical.png" onclick="cylindrical()"></li>
              <li><input id="south" type="image" src="images/south-pole.png" onclick="south()"></li>
            </ul>
          </th>
          <th>
            <ul id="map-controls" style="float: right; margin-top:0;"></ul>
          </th>
        </tr>
      </table>
    </div>
    <div id="draw-controls" class="DrawOptions">
      <h4 style="margin:0;">Draw Controls</h4>
      <ul id="draw-controls"></ul>
    </div>
    <script src="js/planetary/mapInstance.js"></script>
  </body>
</html>
